exports.id=597,exports.ids=[597],exports.modules={1842:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{QV:()=>setAuth,Z5:()=>initAuth,ZP:()=>u,x4:()=>login});var r=s(9648),c=e([r]);r=(c.then?(await c)():c)[0];let n=r.default.create({baseURL:process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:5000",withCredentials:!0});function setAuth(e){e?n.defaults.headers.common.Authorization=`Bearer ${e}`:delete n.defaults.headers.common.Authorization}async function login(e,t){let s=await n.post("/api/auth/login",{username:e,password:t});if(s?.data?.success){let e=s.data.data,t=e?.accessToken??e?.AccessToken,a=e?.user??e?.User;if(t){try{localStorage.setItem("accessToken",t)}catch(e){}setAuth(t)}if(a)try{localStorage.setItem("currentUser",JSON.stringify(a))}catch(e){}}return s.data}let o=!1,i=[];function onRefreshed(e){i.forEach(t=>t(e)),i=[]}function subscribeRefresh(e){i.push(e)}n.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&401===e.response.status&&!t._retry){if(o)return new Promise((s,a)=>{subscribeRefresh(r=>{r?(t.headers.Authorization=`Bearer ${r}`,s(n(t))):a(e)})});t._retry=!0,o=!0;try{let e=await n.post("/api/auth/refresh");if(e?.data?.success&&e.data.data?.accessToken){let s=e.data.data.accessToken;try{localStorage.setItem("accessToken",s)}catch(e){}return setAuth(s),onRefreshed(s),n(t)}}catch(e){}finally{o=!1}}return Promise.reject(e)});let u=n;function initAuth(){}a()}catch(e){a(e)}})},9597:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>App});var r=s(997);s(6764);var c=s(6689),n=s(1842),o=e([n]);function App({Component:e,pageProps:t}){return(0,c.useEffect)(()=>{(0,n.Z5)()},[]),r.jsx(e,{...t})}n=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},6764:()=>{}};